<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>	
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>


<style>
.oneRoom:hover{
	background-color: lightgray !important;

}
#chatInsertArea{
	position: sticky !important;
	z-index: 1; /* ë‹¤ë¥¸ ì½˜í…ì¸  ìœ„ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ z-indexë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. */
}

</style>	
	
<c:set var="customUser" value="${sessionScope.SPRING_SECURITY_CONTEXT.authentication.principal}" />
	
<input type="hidden" id="sessionUserId" value="${customUser.username}"/>
<input type="hidden" id="sessionUserNm" value="${customUser.employee.empNm}"/>
<input type="hidden" id="sessionUserProfile" value="${customUser.employee.empProfile}"/>
<!-- 
	########### í—¤ë” ê°€ì´ë“œ ################
	ë¡œê³  ëˆŒë €ì„ ì‹œì— ê°ì íŒŒíŠ¸ì˜ í™ˆ í™”ë©´ a íƒœê·¸ ì£¼ê¸°(ë¹ˆí™”ë©´)
	ì¶”í›„ ê³µì§€ì‚¬í•­ ë©”ì‹œì§€ ìŠ¤ì¼€ì¤„ ë§ˆì´ë©”ë‰´ ë§Œë“¤ì–´ì§€ë©´ ë§í¬ ì¶”ê°€!!!!!
	ì‹œíë¦¬í‹° ì„¸ì…˜ì •ë³´ í†µí•´ì„œ í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ ì¶”ê°€!!!

 -->


<nav class="navbar navbar-light navbar-glass navbar-top navbar-expand-lg">

	<button
		class="btn navbar-toggler-humburger-icon navbar-toggler me-1 me-sm-3"
		type="button" data-bs-toggle="collapse"
		data-bs-target="#navbarStandard" aria-controls="navbarStandard"
		aria-expanded="false" aria-label="Toggle Navigation">
		<span class="navbar-toggle-icon"><span class="toggle-line"></span></span>
	</button>
	<a class="navbar-brand me-1 me-sm-3" href="/mediform/admin/home">
		<div class="d-flex align-items-center">
		
		<!--     -->
		<!-- ì´ë¯¸ì§€ì— aíƒœê·¸ ì‚¬ìš©í•´ì„œ ê°ì í™ˆí˜ì´ì§€ë¡œ í•˜ì´í¼ë§í¬ ë§Œë“¤ê¸°!!!!!!!!!    -->
		<!--     -->
		<a href="/mediform/admin/home">
			<img class="me-2" src="/resources/image/LOGO.JPG" alt="" width="180" />
		</a>
		
		
		</div>
	</a>
	<div class="collapse navbar-collapse scrollbar" id="navbarStandard">
		<ul class="navbar-nav" data-top-nav-dropdowns="data-top-nav-dropdowns">
			
			<!--  -->
			<!-- ë©”ë‰´ë°” ë²„íŠ¼'s -->
			<!-- ë²„íŠ¼ ê¸€ìëŠ” ìµœëŒ€ 4ê¸€ìê¹Œì§€!!! -->
			<!--  -->
			<div class="box bg-1">
				<button class="buttonA menu" id="patient" type="button" data-text="í™˜ì"><span>í™˜ì</span></button>
		        <button class="buttonA menu" id="receipt"  type="button" data-text="ì ‘ìˆ˜"><span>ì ‘ìˆ˜</span></button>
		        <button class="buttonA menu" id="reservation"  type="button" data-text="ì˜ˆì•½"><span>ì˜ˆì•½</span></button>
		        <button class="buttonA menu" id="hospitalization"  type="button" data-text="ì…í‡´ì›"><span>ì…í‡´ì›</span></button>
		        <button class="buttonA menu" id=""  type="button" data-text="ìˆ˜ë‚©"><span>ìˆ˜ë‚©</span></button>
		        <button class="buttonA menu" id="sms"  type="button" data-text="SMS"><span>SMS</span></button>
		        <button class="buttonA menu" id="sanction"  type="button" data-text="ê²°ì¬"><span>ê²°ì¬</span></button>
			</div>
			
			<li class="nav-item button">
			
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="">í™˜ì</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="">ì ‘ìˆ˜</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="">ì˜ˆì•½</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="">ì…í‡´ì›</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="">ìˆ˜ë‚©</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="sms">SMS</button> -->
<!-- 				&nbsp;&nbsp; -->
<!-- 				<button type="button" style="width:130px" class="btn btn-primary btn-lg" id="sanction">ê²°ì¬</button> -->
			</li>
		
			<!--  -->
			<!-- ë : ë©”ë‰´ë°” ë²„íŠ¼'s -->
			<!--  -->
			
		</ul>
	</div>
	
	
	<ul class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
		
		
		<!-- ë‹¤í¬ëª¨ë“œ ì„¤ì • : ë””ìŠ¤í”Œë ˆì´ noneìœ¼ë¡œ í•´ì„œ í™”ë©´ë‹¨ì— ì¶œë ¥ ì•ˆë¨! -->
		<li class="nav-item ps-2 pe-0">
			<div class="dropdown theme-control-dropdown" style="display:none">
				<a
					class="nav-link d-flex align-items-center dropdown-toggle fa-icon-wait fs-0 pe-1 py-0"
					href="#" role="button" id="themeSwitchDropdown"
					data-bs-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false"><span class="fas fa-sun fs-2"
					data-fa-transform="shrink-2"
					data-theme-dropdown-toggle-icon="light"></span><span
					class="fas fa-moon fs-2" data-fa-transform="shrink-3"
					data-theme-dropdown-toggle-icon="dark"></span><span
					class="fas fa-adjust fs-2" data-fa-transform="shrink-2"
					data-theme-dropdown-toggle-icon="auto"></span></a>
				<div
					class="dropdown-menu dropdown-menu-end dropdown-caret border py-0 mt-3"
					aria-labelledby="themeSwitchDropdown">
					<div class="bg-white dark__bg-1000 rounded-2 py-2">
						<button class="dropdown-item d-flex align-items-center gap-2"
							type="button" value="light" data-theme-control="theme">
							<span class="fas fa-sun"></span>Light<span
								class="fas fa-check dropdown-check-icon ms-auto text-600"></span>
						</button>
						<button class="dropdown-item d-flex align-items-center gap-2"
							type="button" value="dark" data-theme-control="theme">
							<span class="fas fa-moon" data-fa-transform=""></span>Dark<span
								class="fas fa-check dropdown-check-icon ms-auto text-600"></span>
						</button>
						<button class="dropdown-item d-flex align-items-center gap-2"
							type="button" value="auto" data-theme-control="theme">
							<span class="fas fa-adjust" data-fa-transform=""></span>Auto<span
								class="fas fa-check dropdown-check-icon ms-auto text-600"></span>
						</button>
						
					</div>
				</div>
			</div>
		</li>
		<!-- ë : ë‹¤í¬ ëª¨ë“œ ì„¤ì • -->
		
		<!-- ìŒì„±ì¶œë ¥ ì•„ì´ì½˜ : ì¶”í›„ ê²Œì‹œíŒ í˜ì´ì§€ ë§í¬ ì¶”ê°€!!! -->
		<li class="nav-item d-none d-sm-block">
			<a class="nav-link px-0" href="/mediform/admin/voiceout">
			<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-megaphone" viewBox="0 0 16 16">
			  <path d="M13 2.5a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-3 0v-.214c-2.162-1.241-4.49-1.843-6.912-2.083l.405 2.712A1 1 0 0 1 5.51 15.1h-.548a1 1 0 0 1-.916-.599l-1.85-3.49a68.14 68.14 0 0 0-.202-.003A2.014 2.014 0 0 1 0 9V7a2.02 2.02 0 0 1 1.992-2.013 74.663 74.663 0 0 0 2.483-.075c3.043-.154 6.148-.849 8.525-2.199V2.5zm1 0v11a.5.5 0 0 0 1 0v-11a.5.5 0 0 0-1 0zm-1 1.35c-2.344 1.205-5.209 1.842-8 2.033v4.233c.18.01.359.022.537.036 2.568.189 5.093.744 7.463 1.993V3.85zm-9 6.215v-4.13a95.09 95.09 0 0 1-1.992.052A1.02 1.02 0 0 0 1 7v2c0 .55.448 1.002 1.006 1.009A60.49 60.49 0 0 1 4 10.065zm-.657.975 1.609 3.037.01.024h.548l-.002-.014-.443-2.966a68.019 68.019 0 0 0-1.722-.082z"/>
			</svg>
			</a>
		</li>
		<!-- ë :ê²Œì‹œíŒ ì•„ì´ì½˜ -->
		
		
		<!-- ê²Œì‹œíŒ ì•„ì´ì½˜ : ì¶”í›„ ê²Œì‹œíŒ í˜ì´ì§€ ë§í¬ ì¶”ê°€!!! -->
		<li class="nav-item d-none d-sm-block">
			<a class="nav-link px-0" href="/mediform/admin/board/list">
			<svg xmlns="http://www.w3.org/2000/svg" width="40" height="30" fill="currentColor" class="bi bi-clipboard2" viewBox="0 0 16 16">
			  <path d="M3.5 2a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-12a.5.5 0 0 0-.5-.5H12a.5.5 0 0 1 0-1h.5A1.5 1.5 0 0 1 14 2.5v12a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-12A1.5 1.5 0 0 1 3.5 1H4a.5.5 0 0 1 0 1h-.5Z"/>
			  <path d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5Z"/>
			</svg>
			</a>
		</li>
		<!-- ë :ê²Œì‹œíŒ ì•„ì´ì½˜ -->
		
		<li>&nbsp;&nbsp;</li>
		
		<!-- ì¼ì • ë‹¬ë ¥ ì•„ì´ì½˜ : ì¶”í›„ ì¼ì • í˜ì´ì§€ ë§í¬ ì¶”ê°€!!! -->
		<li class="nav-item d-none d-sm-block">
			<a class="nav-link px-0" href="">
			<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-calendar-event" viewBox="0 0 16 16">
			  <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
			  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
			</svg>
			</a>
		</li>
		<!-- ë :ì¼ì • ë‹¬ë ¥ ì•„ì´ì½˜ -->
		
		<li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
				
		<!-- ì•Œë¦¼ ì•„ì´ì½˜ : ì•Œë¦¼ ê¸°ëŠ¥ ì¶”ê°€ë˜ë©´ ìˆ˜ì • -->		
		<li class="nav-item dropdown">
			<a class="nav-link notification-indicator notification-indicator-primary px-0 fa-icon-wait"
			id="navbarDropdownNotification" role="button"
			data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
			data-hide-on-body-scroll="data-hide-on-body-scroll">
			
				<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
				  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
				</svg>
			</a>
			
			<div
				class="dropdown-menu dropdown-caret dropdown-caret dropdown-menu-end dropdown-menu-card dropdown-menu-notification dropdown-caret-bg"
				aria-labelledby="navbarDropdownNotification">
				<div class="card card-notification shadow-none">
					<div class="card-header">
						<div class="row justify-content-between align-items-center">
							<div class="col-auto">
								<h6 class="card-header-title mb-0">Notifications</h6>
							</div>
							<div class="col-auto ps-0 ps-sm-3">
								<a class="card-link fw-normal" href="#">Mark all as read</a>
							</div>
						</div>
					</div>
					<div class="scrollbar-overlay" style="max-height: 19rem">
						<div class="list-group list-group-flush fw-normal fs--1">
							<div class="list-group-title border-bottom">NEW</div>
							<div class="list-group-item">
								<a class="notification notification-flush notification-unread"
									href="#!">
									<div class="notification-avatar">
										<div class="avatar avatar-2xl me-3">
											<img class="rounded-circle"
												src="../assets/img/team/1-thumb.png" alt="" />

										</div>
									</div>
									<div class="notification-body">
										<p class="mb-1">
											<strong>Emma Watson</strong> replied to your comment : "Hello
											world ğŸ˜"
										</p>
										<span class="notification-time"><span class="me-2"
											role="img" aria-label="Emoji">ğŸ’¬</span>Just now</span>

									</div>
								</a>

							</div>
							<div class="list-group-item">
								<a class="notification notification-flush notification-unread"
									href="#!">
									<div class="notification-avatar">
										<div class="avatar avatar-2xl me-3">
											<div class="avatar-name rounded-circle">
												<span>AB</span>
											</div>
										</div>
									</div>
									<div class="notification-body">
										<p class="mb-1">
											<strong>Albert Brooks</strong> reacted to <strong>Mia
												Khalifa's</strong> status
										</p>
										<span class="notification-time"><span
											class="me-2 fab fa-gratipay text-danger"></span>9hr</span>

									</div>
								</a>

							</div>
							<div class="list-group-title border-bottom">EARLIER</div>
							<div class="list-group-item">
								<a class="notification notification-flush" href="#!">
									<div class="notification-avatar">
										<div class="avatar avatar-2xl me-3">
											<img class="rounded-circle"
												src="../assets/img/icons/weather-sm.jpg" alt="" />

										</div>
									</div>
									<div class="notification-body">
										<p class="mb-1">The forecast today shows a low of
											20&#8451; in California. See today's weather.</p>
										<span class="notification-time"><span class="me-2"
											role="img" aria-label="Emoji">ğŸŒ¤ï¸</span>1d</span>

									</div>
								</a>

							</div>
							<div class="list-group-item">
								<a
									class="border-bottom-0 notification-unread  notification notification-flush"
									href="#!">
									<div class="notification-avatar">
										<div class="avatar avatar-xl me-3">
											<img class="rounded-circle"
												src="../assets/img/logos/oxford.png" alt="" />

										</div>
									</div>
									<div class="notification-body">
										<p class="mb-1">
											<strong>University of Oxford</strong> created an event :
											"Causal Inference Hilary 2019"
										</p>
										<span class="notification-time"><span class="me-2"
											role="img" aria-label="Emoji">âœŒï¸</span>1w</span>

									</div>
								</a>

							</div>
							<div class="list-group-item">
								<a class="border-bottom-0 notification notification-flush"
									href="#!">
									<div class="notification-avatar">
										<div class="avatar avatar-xl me-3">
											<img class="rounded-circle" src="../assets/img/team/10.jpg"
												alt="" />

										</div>
									</div>
									<div class="notification-body">
										<p class="mb-1">
											<strong>James Cameron</strong> invited to join the group:
											United Nations International Children's Fund
										</p>
										<span class="notification-time"><span class="me-2"
											role="img" aria-label="Emoji">ğŸ™‹â€</span>2d</span>

									</div>
								</a>

							</div>
						</div>
					</div>
					<div class="card-footer text-center border-top">
						<a class="card-link d-block"
							href="../app/social/notifications.html">View all</a>
					</div>
				</div>
			</div>
		</li>
		<!-- ë : ì•Œë¦¼ -->	
		
		<li>&nbsp;&nbsp;&nbsp;</li>
		
		
		
		
	
		<!-- ì±„íŒ… -->
		<li class="nav-item dropdown">
			<a class="chatting-dropdown-toggle nav-link notification-indicator notification-indicator-primary px-0 fa-icon-wait"
				id="chatting" role="button"
				data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
				data-hide-on-body-scroll="data-hide-on-body-scroll">
				
				<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
				  <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
				</svg>
					
			</a>
			
			<div id="chattingMenuWindow" 
				class="chatting-dropdown-menu dropdown-menu Sdropdown-caret dropdown-caret dropdown-menu-end dropdown-menu-card dropdown-menu-notification dropdown-caret-bg"
				aria-labelledby="chatting">
				
				
				<div class="card card-notification" style="width: 380px; height:550px;">
					<div class="card-header row">
						<div class="col-6">
							<ul class="nav nav-tabs" id="myTab" role="tablist">
								<li class="nav-item text-center col-6" >
									<a
									class="nav-link active fw-semi-bold" id="friend-tab"
									data-bs-toggle="tab" href="#tab-friend" role="tab"
									aria-controls="tab-home" aria-selected="true">ì¹œêµ¬</a>
								</li>
								<li class="nav-item text-center col-6">
									<a
									class="nav-link fw-semi-bold" id="profile-tab"
									data-bs-toggle="tab" href="#tab-chat" role="tab"
									aria-controls="tab-chat" aria-selected="false">ì±„íŒ…</a>
								</li>
							</ul>
						</div>
						<div class="col-3">
						</div>
						<div class="col-3">
							<button id="makeRoom" class="btn btn-outline-primary btn-sm">+</button>
						</div>
						
						
					</div>
					
					
					<div id="chattindMenu" class="row card-body pt-0">
						<div class="tab-content" id="myTabContent">

							<!-- ì¹œêµ¬ëª©ë¡ -->
							<div class="tab-pane fade show active" id="tab-friend"
								role="tabpanel" aria-labelledby="friend-tab">

								<div class="table-container"
									style="overflow-y: auto; max-height: 480px;">
									<table class="table table-sm">
										<thead>
											<tr id="" class="bg-light">
												<th colspan="3" class="col-2" scope="col">ì¹œêµ¬ <span id="friendCount"></span>ëª…</th>
											</tr>
										</thead>
										<tbody id="friendSpace" style="overflow-y: auto; max-height: 420px;">

											<!-- ì¹œêµ¬ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ (ajax) -->

										</tbody>
									</table>
								</div>

							</div>
							<!-- ì¹œêµ¬ ëª©ë¡ ë -->

							<!-- ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ -->
							<div class="tab-pane fade" id="tab-chat" role="tabpanel"
								aria-labelledby="tab-chat">
								
								<div class="table-container"
									style="overflow-y: auto; max-height: 480px;">
									<table class="table table-sm">
										<thead>
											<tr id="" class="bg-light">
												<th colspan="3" class="col-2" scope="col">ì±„íŒ…ë°© <span id="roomCount"></span>ê°œ</th>
											</tr>
										</thead>
										<tbody id="roomSpace" style="overflow-y: auto; max-height: 420px;">



														
															

										</tbody>
									</table>
								</div>
							</div>
							<!-- ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ë -->



							


						</div>
					</div>
					
					
					</div>
					
					
					
					
				</div>
				<!-- ì±„íŒ…ë©”ë‰´ë --> <!-- ì‹¤ì œ ì±„íŒ…ë°© -->
			<div id="chattingWindow"
				class="dropdown-menu Sdropdown-caret dropdown-caret dropdown-menu-end dropdown-menu-card dropdown-menu-notification dropdown-caret-bg"
				aria-labelledby="chatting">
				<input type="hidden" id="chattingRoomNoHidden" value=""/>
				<div class="card card-notification"
					style="width: 380px; height: 550px;">

						<div class="d-flex position-relative p-3 border-bottom mb-3 align-items-center">
							<!-- ì±„íŒ…ë°© í—¤ë” -->
							ì±„íŒ…ë°© í—¤ë”
							<button id="closeChattingBtn" class="btn btn-sm btn-outline-primary">X</button>
							
						</div>
					<div id="chattingArea" class="chat-content-scroll-area scrollbar">
						
						
						<div class="text-center fs--2 text-500">
							<span>May 5, 2019, 11:54 am</span>
						</div>
						
						
						
						
						<div class="d-flex p-3">
							<div class="avatar avatar-l me-2">
								<img class="rounded-circle" src="../assets/img/team/2.jpg"
									alt="" />
							</div>
							<div class="flex-1">
								<div class="w-xxl-75">
									<div class="hover-actions-trigger d-flex align-items-center">
										<div class="chat-message bg-200 p-2 rounded-2">
											What are you doing?What are you doing?
										</div>
									</div>
									<div class="text-400 fs--2">
										<span>11:54 am</span>
									</div>
								</div>
							</div>
						</div>








						<div class='d-flex p-3'>
							<div class='flex-1 d-flex justify-content-end'>
								<div class='w-100 w-xxl-75'>

									<div class='hover-actions-trigger d-flex flex-end-center'>

										

										<div class='bg-primary text-white p-2 rounded-2 chat-message'
											data-bs-theme='light'>
											<p class='mb-0'>I took this pic</p>
											<a href='../assets/img/chat/1.jpg' data-gallery='gallery-3'>
												<img class='rounded' src='../assets/img/chat/1.jpg' alt=''
												width='150'>
											</a>
										</div>

									</div>

									<div class='text-400 fs--2 text-end'>
										11:54 am <span class='fas fa-check ms-2 text-success'></span>
									</div>

								</div>
							</div>
						</div>






					</div>
						<!-- ì±„íŒ… ì…ë ¥ì°½ -->
						<div class="row" id="chatInsertArea">
							<div class="col-12 input-group chat-editor-area" >
				                <input class="input-group-append d-none" type="file" id="chat-file-upload" />
				                <label class="input-group-append chat-file-upload cursor-pointer" for="chat-file-upload"><span class="fas fa-paperclip"></span></label>
								<input id="chatContent" type="text" class="form-control"/>
	<!-- 							<div class="emojiarea-editor outline-none scrollbar" contenteditable="true"></div> -->
	<!-- 			                <div class="btn btn-link emoji-icon" data-picmo="data-picmo" data-picmo-input-target=".emojiarea-editor"><span class="far fa-laugh-beam"></span></div> -->
				                <button id="sendChattingBtn" class="input-group-append btn btn-sm btn-send shadow-none" type="submit">Send</button>
							</div>
						</div>
						<!-- ì±„íŒ… ì…ë ¥ì°½ ë -->

				</div>
			</div>


		</li>
		
		
		
		
		
		
		
		
		<li>&nbsp;&nbsp;&nbsp;</li>
			
		<!-- í”„ë¡œí•„ ì´ë¯¸ì§€ ëˆ„ë¥´ë©´ ë§ˆì´í˜ì´ì§€ ë¡œê·¸ì•„ì›ƒ ë“œë¡­ ë‹¤ìš´ -->	
		<li class="nav-item dropdown">
			<a class="nav-link pe-0 ps-2" id="navbarDropdownUser" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<div class="avatar avatar-xl">
					<img class="rounded-circle" src="${customUser.employee.empProfile}" alt="" />
				</div>
			</a>
			<div class="dropdown-menu dropdown-caret dropdown-caret dropdown-menu-end py-1" aria-labelledby="navbarDropdownUser">

					<a class="dropdown-item text-center" href="/mediform/common/mypage">
						<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
						  <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
						  <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
						</svg>
						<span>ë§ˆì´í˜ì´ì§€</span>
					</a>
					<div class="dropdown-divider"></div>
					<a class="dropdown-item text-center" href="/mediform/logout">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key" viewBox="0 0 16 16">
					  <path d="M0 8a4 4 0 0 1 7.465-2H14a.5.5 0 0 1 .354.146l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L13 9.207l-.646.647a.5.5 0 0 1-.708 0L11 9.207l-.646.647a.5.5 0 0 1-.708 0L9 9.207l-.646.647A.5.5 0 0 1 8 10h-.535A4 4 0 0 1 0 8zm4-3a3 3 0 1 0 2.712 4.285A.5.5 0 0 1 7.163 9h.63l.853-.854a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.793-.793-1-1h-6.63a.5.5 0 0 1-.451-.285A3 3 0 0 0 4 5z"/>
					  <path d="M4 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
					</svg>
						<span>Logout</span>
					</a>
			</div>
		</li>
		<!-- ë : í”„ë¡œí•„  -->
		
	</ul>
</nav>

<div class="modal fade" id="makeRoomModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 450px">
    <div class="modal-content position-relative">
      <div class="position-absolute top-0 end-0 mt-2 me-2 z-1">
        <button class="btn-close btn btn-sm btn-circle d-flex flex-center transition-base" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
			<div class="modal-body p-0">
				<div class="rounded-top-3 py-3 ps-4 pe-6"
					style="background-color: midnightblue">
					<h4 class="mb-1 text-white" id="modalExampleDemoLabel">ë°© ë§Œë“¤ê¸°</h4>
				</div>
				<div class="table-container"
					style="overflow-y: auto; max-height: 400px;">
					<table class="table table-sm">
						<thead>
							<tr id="" class="bg-light">
								<th colspan="3" class="col-2" scope="col">ì„ íƒëœ ì¹œêµ¬ <span
									id="friendCount1">0</span>ëª…
								</th>
							</tr>
						</thead>
						<tbody id="friendSpace1"
							style="overflow-y: auto; max-height: 360px;">

							<!-- ì¹œêµ¬ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ (ajax) -->

						</tbody>
					</table>
				</div>
			</div>
			<div class="modal-footer">
        <button class="btn btn-primary" id="makeRoomBtn" type="button">ë°©ë§Œë“¤ê¸°</button>
        <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="makeRoomNameModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 500px">
    <div class="modal-content position-relative">
      <div class="position-absolute top-0 end-0 mt-2 me-2 z-1">
        <button class="btn-close btn btn-sm btn-circle d-flex flex-center transition-base" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
			<div class="modal-body p-0">
				<div class="rounded-top-3 py-3 ps-4 pe-6"
					style="background-color: midnightblue">
					<h4 class="mb-1 text-white" id="modalExampleDemoLabel">ë°© ë§Œë“¤ê¸°</h4>
				</div>
				<div class="p-4 pb-0">
		          <div class="text-center fw-semi-bold">
		          		<input type="text" id="roomName"/>
		          	<br>
		          </div>
				</div>
			</div>
			<div class="modal-footer">
	        <button class="btn btn-primary" id="makeRoomBtn1" type="button">ë°©ë§Œë“¤ê¸°</button>
	        <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>
</div>


<!-- <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {
	var token = $("meta[name='_csrf']").attr("content");
	var header = $("meta[name='_csrf_header']").attr("content")

	
	
	
	var friendSpace = $("#friendSpace");
	var friendCount = $("#friendCount");
	
	var makeRoom = $("#makeRoom");
	var makeRoomModal = $("#makeRoomModal");
	
	var friendSpace1 = $("#friendSpace1");
	var friendCount1 = $("#friendCount1");
	
	var makeRoomBtn = $("#makeRoomBtn");
	
	var roomSpace = $("#roomSpace");
	var roomCount = $("#roomCount");
	
	document.getElementById('chattingWindow').style.display = 'none';
	
	var closeChattingBtn = $("#closeChattingBtn");
	
	
	
    $(".chatting-dropdown-toggle").click(function() {
	      $(".chatting-dropdown-menu").toggle(); // ë“œë¡­ë‹¤ìš´ í† ê¸€
	      $("#chattingArea").html("");
	      console.log("í† ê¸€ ì´ë²¤íŠ¸");
	      
	      // ì¹œêµ¬ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
	      $.ajax({
	   		type : "post",
	  		url : "/mediform/common/chatting/friend/list",
	   		contentType : "application/json; charset=utf-8",
	   		async: false,
	          beforeSend : function(xhr){            
	              xhr.setRequestHeader(header,token);
	          },
	   		success : function(res) {
	   			
	   			var freindListHtml = "";
	   			
	   			if(res.length == 0){
	   				console.log("ì¹œêµ¬ ì—†ìŒ!");
	   				
	   			}else{
	   				console.log("ì¹œêµ¬ ìˆìŒ");
	   				friendCount.html(res.length);
	   				
	   				$(res).each(function(){
	   					
	   					var department = "";
	   					
	   					if(this.empSe === "a"){
	   						department = "ì›ë¬´ê³¼";
	   					}else if(this.empSe === "d"){
	   						department = "ì˜ì‚¬";
	   					}else if(this.empSe === "n"){
	   						department = "ê°„í˜¸ì‚¬";
	   					}else if(this.empSe === "t"){
	   						department = "ì¹˜ë£Œì‚¬";
	   					}else if(this.empSe === "m"){
	   						department = "ê´€ë¦¬ì";
	   					}else if(this.empSe === "k"){
	   						department = "ë³‘ì›ì¥";
	   					}
	   					
	  					
	   					freindListHtml += "<tr class='oneFriend' id='' style='height: 55px;'>";
	   	 				freindListHtml += "	<td class='col-3' style='vertical-align: middle'>";
	   	 				freindListHtml += "		<img class='rounded-circle' src='" + this.empProfile + "' alt='' style='width:40px; height:40px;'/>";
	   	 				freindListHtml += "	</td>";
	   	 				freindListHtml += "	<td class='col-5' style='vertical-align: middle'>" + this.empNm +"</td>";
	   	 				freindListHtml += "	<td class='col-4 text-center' style='vertical-align: middle'>";
	   	 				freindListHtml += department;
	   	 				freindListHtml += "	</td>";
	   	 				freindListHtml += "</tr>";
	   				});
	   				
	   				
	   				friendSpace.html(freindListHtml);
	   				
	   				
	   			}
	   			
	   			
	   		}
	   	});
	    // ì¹œêµ¬ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ë
	    
	      var sessionUserId = $("#sessionUserId").val();
	      
	      var chatUser = {
	    	  sessionUserId : sessionUserId
	      }
	      
	      console.log("ì„¸ì…˜ ì•„ì´ë”” : " + sessionUserId)
	      
	      // ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
	      $.ajax({
		   		type : "post",
		  		url : "/mediform/common/chatting/room/list",
		  		data : JSON.stringify(chatUser),
		   		contentType : "application/json; charset=utf-8",
		   		async: false,
		          beforeSend : function(xhr){            
		              xhr.setRequestHeader(header,token);
		          },
		   		success : function(res) {
		   			
		   			var roomListHtml = "";
		   			
		   			if(res.length == 0){
		   				console.log("ì±„íŒ…ë°© ì—†ìŒ!");
		   				
		   			}else{
		   				console.log("ì±„íŒ…ë°© ìˆìŒ");
		   				roomCount.html(res.length);
		   				
		   				// ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
		   				$(res).each(function(){
		   					
		   					roomListHtml += "<tbody class='oneRoom' id='" + this.chttRoomNo + "'>";
		   					roomListHtml += "	<tr id='' style='height: 25px;'>";
		   					roomListHtml += "		<td rowspan='2' class='col-3' style='vertical-align: middle'>";
		   					roomListHtml += "			<img class='rounded-circle' src='${customUser.employee.empProfile}' alt='' style='width:40px; height:40px;'/>";
		   					roomListHtml += "		</td>";
		   					roomListHtml += "		<td class='col-7 text-center fw-semi-bold' style='vertical-align: middle'>" + this.indvdlSetupRoomNm + "</td>";
		   					roomListHtml += "		<td class='col-2 text-center' style='vertical-align: middle'>";
		   					roomListHtml +=				this.chttDe;
		   					roomListHtml += "		</td>";
		   					roomListHtml += "	</tr>";
		   					roomListHtml += "	<tr class='' id='' style='height: 25px;'>";
		   					roomListHtml += "		<td class='col-7' style='vertical-align: middle'>";
		   					roomListHtml += 			this.chttCn;
		   					roomListHtml += "		</td>";
		   					roomListHtml += "		<td class='col-2 text-center' style='vertical-align: middle'>";
		   					roomListHtml += "			xx";
		   					roomListHtml += "		</td>";
		   					roomListHtml += "	</tr>";
		   					roomListHtml += "</tbody>";
		   					
		   				});
		   				roomSpace.html(roomListHtml);
		   				
		   				// ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ ë
		   			}
		   		}
	      });
	      
	      // ì±„íŒ…ë°©ì„ í´ë¦­í•´ì„œ ì±„íŒ…ë°©ì„ ì—´ê¸° => í•´ë‹¹ ì±„íŒ…ë°©ì˜ ì±„íŒ… ë‚´ì—­ì„ ì•„ì‘ìŠ¤ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
	      $(".oneRoom").on("click", function(){
	    	    $("#chattingArea").html();
				console.log("ì±„íŒ…ë°©,, í¬,,í´ë¦­!!");
				
				document.getElementById('chattingMenuWindow').style.display = 'none';
				document.getElementById('chattingWindow').style.display = 'block';
				
				var clickedElement = $(this);
				var clickedElementID = clickedElement.attr("id"); // í´ë¦­í•œ ìš”ì†Œì˜ ID ì†ì„±ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
				console.log("í´ë¦­í•œ ìš”ì†Œì˜ ID(<<<ë°©ë²ˆí˜¸>>>): " + clickedElementID);
				
				
				var sendChattingBtn = $("#sendChattingBtn");
				var chatContent = $("#chatContent");
				
				var chattingRoomNoHidden = $("#chattingRoomNoHidden");
				
				chattingRoomNoHidden.val(clickedElementID);
				
				
				
				var chatObject = {
						chttRoomNo : clickedElementID
				}
				
				$.ajax({
			 		type : "post",
					url : "/mediform/common/chatting/select",
					data : JSON.stringify(chatObject),
			 		contentType : "application/json; charset=utf-8",
			 		async: false,
			        beforeSend : function(xhr){            
			            xhr.setRequestHeader(header,token);
			        },
			 		success : function(res) {

						$(res).each(function(){
			 				
			 				var cur_session = $("#sessionUserId").val();
				 			
			 				var date = new Date(this.chttDe);
							
							var hours = date.getHours();
							var minutes = date.getMinutes();
							var formattedTime = hours.toString().padStart(2, '0') + ":" + minutes.toString().padStart(2, '0');
							
							
// 							console.log("ë¡œê·¸ì¸í•œ ì„¸ì…˜ ì•„ì´ë”” : " + cur_session);
// 							console.log("ì±„íŒ… ë³´ë‚¸ ì•„ì´ë”” : " + this.empNo);
							
							if(cur_session === this.empNo){
									
								console.log("ë‚´ê°€ ë³´ë‚¸ ì±„íŒ…~");
								
								var str = "";
								str += "<div class='d-flex p-3'>";
								str += " <div class='flex-1 d-flex justify-content-end'>";
								str += "  <div class='w-100 w-xxl-75'>";
								str += "   <div class='hover-actions-trigger d-flex flex-end-center'>";
								str += "    <div class='bg-primary text-white p-2 rounded-2 chat-message' data-bs-theme='light'>";
								str += "     <p class='mb-0'>" + this.chttCn + "</p>";
								str += "     <a href='../assets/img/chat/1.jpg' data-gallery='gallery-3'>";
								str += "      <img class='rounded' src='' alt='' width='150'>";
								str += "     </a>";
								str += "    </div>";
								str += "   </div>";
								str += "   <div class='text-400 fs--2 text-end'>";
								str += formattedTime;
								str += "    <span class='fas fa-check ms-2 text-success'></span>";
								str += "   </div>";
								str += "  </div>";
								str += " </div>";
								str += "</div>";
								
								console.log("ì–´íœë“œ ì§ì „!!!");
								
								$("#chattingArea").append(str);
							
				 			}else{
								
				 				console.log("ë‚¨ì´ ë³´ë‚¸ ì±„íŒ…~");
				 				
				 				var str = "";
								str += "<div class='d-flex p-3'>";
								str += " <div class='avatar avatar-l me-2'>";
								str += "  <img class='rounded-circle' src='" + this.empProfile + "' alt='' />";
								str += " </div>";
								str += " <div class='flex-1'>";
								str += "  <div class='w-xxl-75'>";
								str += "   <div class='hover-actions-trigger d-flex align-items-center'>";
								str += "    <div class='chat-message bg-200 p-2 rounded-2'>";
								str += this.chttCn;
								str += "    </div>";
								str += "   </div>";
								str += "   <div class='text-400 fs--2'>";
								str += "    <span>" + formattedTime + "</span>";
								str += "   </div>";
								str += "  </div>";
								str += " </div>";
								str += "</div>";
				 				
								$("#chattingArea").append(str);
				 				
							}
			 				
			 			
			 			});
			 			
			 			
			 		}	
			 			
			 	});
				
				
				
				sendChattingBtn.on("click", function(){
					
					console.log("ë³´ë‚´ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ê¹Œì§€ ì˜´!!!");
					sendMessage();
					// ì±„íŒ… ë³´ë‚´ê¸° ì¸í’‹ ë°•ìŠ¤ ì´ˆê¸°í™”
					chatContent.val("");
				});
				
				var chttRoomNo = $("#chattingRoomNoHidden").val(); // ë°©ë²ˆí˜¸

				// ì†Œì¼“ ìƒì„±!
				
				console.log("1...");
				
				var sock = new WebSocket("ws://localhost/chatting/" + chttRoomNo);
// 				var sock = new SockJS("http://192.168.144.9:80/chatting/" + chttRoomNo);
// 				sock.onopen = function(evt){
// 					console.log("Websocket ì—°ê²° ì™„ë£Œ!");
// 				}
				
// 				var sock = new SockJS('http://192.168.144.9/chatting');
// 				sock.send("test");
				sock.onopen = onOpen;
				sock.onmessage = onMessage;
				sock.onclose = onClose;
				
				
// 				console.log("### sock : " + sock);

				function sendMessage(){
					
					console.log("sendMessage ì‹¤í–‰!!!!")
					
					var token = $("meta[name='_csrf']").attr("content");
					var header = $("meta[name='_csrf_header']").attr("content");
					
					// ì†Œì¼“ìœ¼ë¡œ ë³´ë‚¼ ë°ì´í„°ì™€ DBì— insertí•  ë°ì´í„°
					var empProfile = $("#sessionUserProfile").val(); // í”„ë¡œí•„ ì´ë¯¸ì§€
					var empNo = $("#sessionUserId").val(); // ì•„ì´ë””
					var empNm = $("#sessionUserNm").val(); // ì´ë¦„
					var chatContent = $("#chatContent").val(); // ë‚´ìš©
					var currentDate = new Date(); // ë³´ë‚¸ ì‹œê°„
					
					var chttRoomNo = $("#chattingRoomNoHidden").val(); // ë°©ë²ˆí˜¸
					
					// ë°ì´í„° ì½˜ì†” í™•ì¸
					console.log("*** í”„ë¡œí•„ : " + empProfile);
					console.log("*** ì‚¬ë²ˆ : " + empNo);
					console.log("*** ì´ë¦„ : " + empNm);
					console.log("*** ë‚´ìš© : " + chatContent);
					console.log("*** ë‚ ì§œ ì‹œê°„ : " + currentDate);
					console.log("*** ë°©ë²ˆí˜¸ : " + chttRoomNo);
					
					
					
					sock.send(empProfile + "s:p:l" + empNm + "s:p:l" + chatContent + "s:p:l" + currentDate);
					
					var chatObject = {
							empNo : empNo,
							chttCn : chatContent,
							chttRoomNo : chttRoomNo
					};
					
					$.ajax({
				 		type : "post",
						url : "/mediform/common/chatting/insert",
						data : JSON.stringify(chatObject),
				 		contentType : "application/json; charset=utf-8",
				 		async: false,
				        beforeSend : function(xhr){            
				            xhr.setRequestHeader(header,token);
				        },
				 		success : function(result) {
							console.log("ì±„íŒ… insert ì„±ê³µ!");
				 		}
				 	});
					
					
					
				}

				//ì†Œì¼“ì—ì„œ ë©”ì‹œì§€ë¥¼ ë°›ì•˜ì„ ë•Œ
				function onMessage(msg) {
					
					console.log("onMessage ì†Œì¼“ì—ì„œ ë©”ì‹œì§€ ë°›ê¸° ì„±ê³µ!!!");
					
					var empNm = $("#sessionUserNm").val();
					var data = msg.data;
					var name = null; 
					var message = null;
					var profile = null;
					var chattingDate = null
					
					var arr = data.split("s:p:l");
					
					for(var i=0; i<arr.length; i++){
						console.log('arr[' + i + ']: ' + arr[i]);
					}
					
					var cur_session = empNm; //í˜„ì¬ ì„¸ì…˜ì— ë¡œê·¸ì¸ í•œ ì‚¬ëŒ
					console.log("cur_session : " + cur_session);
					
					profile = arr[0];
					name = arr[1];
					message = arr[2];
					chattingDate = arr[3];
					
					var date = new Date(chattingDate);
					
					var hours = date.getHours();
					var minutes = date.getMinutes();
					
					var formattedTime = hours.toString().padStart(2, '0') + ":" + minutes.toString().padStart(2, '0');
					
					console.log("^^^ë¡œê·¸ì¸í•œ ê³„ì •^^^(onMessage) : " + empNm);
					console.log("^^^ë³´ë‚¸ì‚¬ëŒ ì´ë¦„^^^(onMessage) : " + name);
					console.log("^^^í”„ë¡œí•„ ê²½ë¡œ^^^(onMessage) : " + profile);
					console.log("^^^ë©”ì„¸ì§€^^^(onMessage) : " + message);
					
					
				    // ë³´ë‚´ëŠ” ì‚¬ëŒì„ ë¶„ë¥˜
				    // ë‚´ê°€ ë³´ë‚¼ ë•Œ
					if(name == cur_session){
						console.log("")
						var str = "";
						str += "<div class='d-flex p-3'>";
						str += " <div class='flex-1 d-flex justify-content-end'>";
						str += "  <div class='w-100 w-xxl-75'>";
						str += "   <div class='hover-actions-trigger d-flex flex-end-center'>";
						str += "    <div class='bg-primary text-white p-2 rounded-2 chat-message' data-bs-theme='light'>";
						str += "     <p class='mb-0'>" + message + "</p>";
						str += "     <a href='../assets/img/chat/1.jpg' data-gallery='gallery-3'>";
						str += "      <img class='rounded' src='' alt='' width='150'>";
						str += "     </a>";
						str += "    </div>";
						str += "   </div>";
						str += "   <div class='text-400 fs--2 text-end'>";
						str += formattedTime;
						str += "    <span class='fas fa-check ms-2 text-success'></span>";
						str += "   </div>";
						str += "  </div>";
						str += " </div>";
						str += "</div>";
						
						
						$("#chattingArea").append(str);
					}
				    // ë‹¤ë¥¸ ì‚¬ëŒì´ ë³´ëƒˆì„ ë•Œ
					else{
						
						var str = "";
						str += "<div class='d-flex p-3'>";
						str += " <div class='avatar avatar-l me-2'>";
						str += "  <img class='rounded-circle' src='" + profile + "' alt='' />";
						str += " </div>";
						str += " <div class='flex-1'>";
						str += "  <div class='w-xxl-75'>";
						str += "   <div class='hover-actions-trigger d-flex align-items-center'>";
						str += "    <div class='chat-message bg-200 p-2 rounded-2'>";
						str += message;
						str += "    </div>";
						str += "   </div>";
						str += "   <div class='text-400 fs--2'>";
						str += "    <span>" + formattedTime + "</span>";
						str += "   </div>";
						str += "  </div>";
						str += " </div>";
						str += "</div>";
						
// 						<div class='d-flex p-3'>
// 							<div class='avatar avatar-l me-2'>
// 								<img class='rounded-circle' src='../assets/img/team/2.jpg' alt='' />
// 							</div>
// 							<div class='flex-1'>
// 								<div class='w-xxl-75'>
// 									<div class='hover-actions-trigger d-flex align-items-center'>
// 										<div class='chat-message bg-200 p-2 rounded-2'>
// 											What are you doing?What are you doing?
// 										</div>
// 									</div>
// 									<div class='text-400 fs--2'>
// 										<span>11:54 am</span>
// 									</div>
// 								</div>
// 							</div>
// 						</div>
						
						
						
						$("#chattingArea").append(str);
					}
					
				}


				//ì±„íŒ…ì°½ì— ë“¤ì–´ì™”ì„ ë•Œ
				function onOpen(evt) {
					console.log("Open...!");
				}


				// ì±„íŒ… ë‚˜ê°ˆ ë•Œ : !!!!*** ì½ì€ ìœ„ì¹˜ë¥¼ ì—¬ê¸°ì—ì„œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤˜ì•¼ë ê¹Œ????
				function onClose(evt) {
					console.log("Close()...!");
					
				}
				
				
				
		 }); 
	 
	      
	      // ì±„íŒ…ì°½ì„ ë‹«ì„ ë•Œ : !!!!*** ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ìµœê·¼ ë³´ë‚¸ ë©”ì‹œì§€ ìµœì‹ í™” ì—…ë°ì´íŠ¸í•˜ê¸° 
	      closeChattingBtn.on("click", function(){
	    	  document.getElementById('chattingWindow').style.display = 'none';
	    	  document.getElementById('chattingMenuWindow').style.display = 'block';
	    	  
	  	 });
	      
      
    });
	// ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ë
    
	// ë°©ë§Œë“¤ê¸° í´ë¦­ ì´ë²¤íŠ¸ - ëª¨ë‹¬
    makeRoom.on("click", function(){
    	
    	makeRoomModal.modal("show");
    	
   		var checkboxes = document.querySelectorAll('input[name=selectFriend]:checked');
    	
    	var selectedCount = 0;
   	    console.log("selectedCount : " + selectedCount);

    	
   	    // ??? ì„ íƒëœ ì¹œêµ¬ìˆ˜ê°€ ì•ˆ ë°”ë€œ
   	 	checkboxes.forEach(function(checkbox) {
	   	    console.log("ì²´í¬ë°•ìŠ¤ë“¤ : " + checkboxes);
	   	    
	   	 	checkbox.addEventListener('change', function() {
	   	        if (this.checked) {
	   	            selectedCount++; // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ë©´ ì¹´ìš´íŠ¸ ì¦ê°€
	   	        } else {
	   	            selectedCount--; // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒ í•´ì œë˜ë©´ ì¹´ìš´íŠ¸ ê°ì†Œ
	   	        }
	   	       	console.log("ì„ íƒëœ ì¹œêµ¬ ìˆ˜ : " + selectedCount);

	   	     	friendCount1.html(selectedCount);
	   	    });
   	        
   	 	});
   		// ì„ íƒëœ ì¹œêµ¬ìˆ˜ ë³€ê²½ ë
    	
    	
   	    // ì¹œêµ¬ ëª©ë¡ ì•„ì‘ìŠ¤
    	$.ajax({
	   		type : "post",
	  		url : "/mediform/common/chatting/friend/list",
	   		contentType : "application/json; charset=utf-8",
	   		async: false,
	          beforeSend : function(xhr){            
	              xhr.setRequestHeader(header,token);
	          },
	   		success : function(res) {
	   			
	   			var freindListHtml1 = "";
	   			
	   			if(res.length == 0){
	   				console.log("ì¹œêµ¬ ì—†ìŒ!");
	   				
	   			}else{
	   				console.log("ì¹œêµ¬ ìˆìŒ");
	   				
	   				$(res).each(function(){
	   					
	   					var department = "";
	   					
	   					if(this.empSe === "a"){
	   						department = "ì›ë¬´ê³¼";
	   					}else if(this.empSe === "d"){
	   						department = "ì˜ì‚¬";
	   					}else if(this.empSe === "n"){
	   						department = "ê°„í˜¸ì‚¬";
	   					}else if(this.empSe === "t"){
	   						department = "ì¹˜ë£Œì‚¬";
	   					}else if(this.empSe === "m"){
	   						department = "ê´€ë¦¬ì";
	   					}else if(this.empSe === "k"){
	   						department = "ë³‘ì›ì¥";
	   					}
	   					
	  					
	   					freindListHtml1 += "<tr class='oneFriend' id='' style='height: 55px;'>";
	   					freindListHtml1 += "	<td class='col-1' style='vertical-align: middle'>"
	   					freindListHtml1 += "		<input type='checkbox' name='selectFriend' value='" + this.empNo + "' />"
	   					freindListHtml1 += "	</td>"
	   	 				freindListHtml1 += "	<td class='col-3' style='vertical-align: middle'>";
	   	 				freindListHtml1 += "		<img class='rounded-circle' src='" + this.empProfile + "' alt='' style='width:40px; height:40px;'/>";
	   	 				freindListHtml1 += "	</td>";
	   	 				freindListHtml1 += "	<td class='col-4' style='vertical-align: middle'>" + this.empNm +"</td>";
	   	 				freindListHtml1 += "	<td class='col-4 text-center' style='vertical-align: middle'>";
	   	 				freindListHtml1 += department;
	   	 				freindListHtml1 += "	</td>";
	   	 				freindListHtml1 += "</tr>";
	   				});
	   				
	   				
	   				friendSpace1.html(freindListHtml1);
	   				
	   			}
	   			
	  			console.log("");
	   		}
	   	});
    	// ì¹œêµ¬ ëª©ë¡ ì•„ì‘ìŠ¤ ë
    });
 	// ë°©ë§Œë“¤ê¸° í´ë¦­ ì´ë²¤íŠ¸ ë - ëª¨ë‹¬
	

    // ë°©ë§Œë“¤ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    makeRoomBtn.on("click", function(){
    	
    	var makeRoomNameModal = $("#makeRoomNameModal");
    	
    	// ë°© ì´ë¦„ ì„¤ì •
    	makeRoomNameModal.modal("show");
    	
    	var makeRoomBtn1 = $("#makeRoomBtn1");
    	
    	// ë°©ë§Œë“¤ê¸°
    	makeRoomBtn1.on("click", function(){
    		
    		 var selectedFriendValues = []; // ì„ íƒëœ ì‚¬ëŒë“¤
       	 
	       	 var checkboxes = document.querySelectorAll('input[name=selectFriend]:checked');
	       	
	       	 checkboxes.forEach(function(checkbox) {
	       	 	selectedFriendValues.push(checkbox.value);
	       	        
	       	 });
	       	 
	       	 console.log("ì²´í¬ëœ ì‚¬ëŒë“¤ : " + selectedFriendValues)

	       	 var roomName = $("#roomName").val();
	       	 
	       	 console.log("ë°©ì´ë¦„ : " + roomName);
	       	 
	       	 if (selectedFriendValues.length > 0) {
	       		 
	       		 // ì±„íŒ…ë°© ë§Œë“¤ê¸° inset ì•„ì‘ìŠ¤
	       		 $.ajax({
	       		 		type : "post",
	       				url : "/mediform/common/chattingroom/insert?roomname="+roomName,
	       				data : JSON.stringify(selectedFriendValues),
	       		 		contentType : "application/json; charset=utf-8",
	       		 		async: false,
	       		        beforeSend : function(xhr){            
	       		            xhr.setRequestHeader(header,token);
	       		        },
	       		 		success : function(result) {
	       					console.log("result : " + result);
	       					if(result === "success"){
	       						
	       						makeRoomNameModal.modal("hide");
	       						makeRoomModal.modal("hide");
	       						
	       						// ëª¨ë‹¬
	       						Swal.fire({
	       					      icon: 'success',
	       					      title: 'ì±„íŒ…ë°© ìƒì„±',
	       					      text: 'ì±„íŒ…ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤',
	       					      confirmButtonText: 'í™•ì¸',
	       					      confirmButtonColor: 'midnightblue',
	       					    });
	       						// ëª¨ë‹¬ ë
	       					}
	       					
	       		 		}
	       		 	});
	       			// ì±„íŒ…ë°© ë§Œë“¤ê¸° inset ì•„ì‘ìŠ¤ ë
	       		 
	       	 }else{
	       		 
	       	 }
    		
    	});
    	// ë°©ë§Œë“¤ê¸° ë
    	 
    });
    // ë°©ë§Œë“¤ê¸° í´ë¦­ì´ë²¤íŠ¸ ë
    

    
    
    
    

});








$(function(){

	
	var receipt = $("#receipt");
	var patient = $("#patient");
	var sms = $("#sms");
	var sanction = $("#sanction");
	var reservation = $("#reservation");
	var hospitalization = $("#hospitalization");
	
	receipt.on("click", function(){
		location.href = "/mediform/admin/rcept/list";
	});
	
	sms.on("click", function(){
		location.href = "/mediform/admin/sms/main";
	});
	
	sanction.on("click", function(){
		location.href = "/mediform/admin/employee/insert";
	});
	
	patient.on("click", function(){
		location.href = "/mediform/admin/patient/list";
	});
	
	reservation.on("click", function(){
		location.href = "/mediform/admin/reservation/main";
	});
	
	hospitalization.on("click", function(){
		location.href = "/mediform/admin/hospitalization/main";
	});
	
});

</script>
